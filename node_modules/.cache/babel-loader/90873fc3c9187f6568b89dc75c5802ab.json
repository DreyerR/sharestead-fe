{"ast":null,"code":"import _objectSpread from\"C:/Users/rudid/OneDrive/Documents/React/sharestead-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/rudid/OneDrive/Documents/React/sharestead-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Modal,Button,Form}from'react-bootstrap';import{faTimes}from'@fortawesome/free-solid-svg-icons';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import axios from'axios';import CustomToast from'./CustomToast';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function RevokeAccessModal(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),emailText=_useState2[0],setEmailText=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),disableButton=_useState4[0],setDisableButton=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showToast=_useState6[0],setShowToast=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),success=_useState8[0],setSuccess=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),toastMessage=_useState10[0],setToastMessage=_useState10[1];var handleSubmit=function handleSubmit(e){e.preventDefault();setDisableButton(true);handlePostRequest();};var handlePostRequest=function handlePostRequest(){var token=localStorage.getItem('token');var headers={'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)};axios.put(\"https://cors-everywhere.herokuapp.com/http://sharestead-env-2.eba-mbvpyjui.eu-west-3.elasticbeanstalk.com/image/revoke/\".concat(emailText,\"/\").concat(props.filename),null,{headers:headers}).then(function(response){setSuccess(true);if(response.status===200){setToastMessage(\"Successfully revoked photo\");}}).catch(function(error){setToastMessage(error.response.data.message);setSuccess(false);});setShowToast(true);setTimeout(function(){setShowToast(false);},2000);setDisableButton(false);};var handleInputChange=function handleInputChange(e){setEmailText(e.target.value);};return/*#__PURE__*/_jsxs(Modal,_objectSpread(_objectSpread({},props),{},{size:\"lg\",\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{id:\"contained-modal-title-vcenter\",children:\"Revoke\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Account to revoke:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"Enter email address\",name:\"email\",onChange:handleInputChange,values:emailText,required:true})]})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsxs(Button,{variant:\"danger\",onClick:handleSubmit,disabled:disableButton,children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTimes}),\" \",disableButton?'Please wait...':'Revoke']})}),/*#__PURE__*/_jsx(\"div\",{style:{\"display\":showToast?\"block\":\"none\"},children:/*#__PURE__*/_jsx(CustomToast,{success:success,message:toastMessage})})]}));}export default RevokeAccessModal;","map":{"version":3,"sources":["C:/Users/rudid/OneDrive/Documents/React/sharestead-frontend/src/components/RevokeAccessModal.js"],"names":["React","useState","Modal","Button","Form","faTimes","FontAwesomeIcon","axios","CustomToast","RevokeAccessModal","props","emailText","setEmailText","disableButton","setDisableButton","showToast","setShowToast","success","setSuccess","toastMessage","setToastMessage","handleSubmit","e","preventDefault","handlePostRequest","token","localStorage","getItem","headers","put","filename","then","response","status","catch","error","data","message","setTimeout","handleInputChange","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\nimport { Modal, Button, Form } from 'react-bootstrap'\r\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport axios from 'axios'\r\nimport CustomToast from './CustomToast'\r\n\r\nfunction RevokeAccessModal(props) {\r\n\r\n    const [emailText, setEmailText] = useState(\"\");\r\n    const [disableButton, setDisableButton] = useState(false);\r\n    const [showToast, setShowToast] = useState(false);\r\n    const [success, setSuccess] = useState(true);\r\n    const [toastMessage, setToastMessage] = useState(\"\");\r\n\r\n    const handleSubmit = e => {\r\n        e.preventDefault();\r\n\r\n        setDisableButton(true);\r\n        handlePostRequest();\r\n    }\r\n\r\n    const handlePostRequest = () => {\r\n        let token = localStorage.getItem('token');\r\n\r\n        const headers = {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`\r\n        }\r\n\r\n        axios.put(`https://cors-everywhere.herokuapp.com/http://sharestead-env-2.eba-mbvpyjui.eu-west-3.elasticbeanstalk.com/image/revoke/${emailText}/${props.filename}`, null, {\r\n            headers: headers\r\n        }).then(response => {\r\n            setSuccess(true);\r\n            if (response.status === 200) {\r\n                setToastMessage(\"Successfully revoked photo\");\r\n            }\r\n        }).catch(error => {\r\n            setToastMessage(error.response.data.message);\r\n            setSuccess(false);\r\n        });\r\n\r\n        setShowToast(true);\r\n        setTimeout(() => {\r\n            setShowToast(false);\r\n        }, 2000);\r\n\r\n        setDisableButton(false);\r\n    }\r\n\r\n    const handleInputChange = e => {\r\n        setEmailText(e.target.value);\r\n    }\r\n\r\n    return (\r\n        <Modal\r\n            {...props}\r\n            size=\"lg\"\r\n            aria-labelledby=\"contained-modal-title-vcenter\"\r\n            centered\r\n        >\r\n            <Modal.Header closeButton>\r\n                <Modal.Title id=\"contained-modal-title-vcenter\">\r\n                    Revoke\r\n                </Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <Form.Group>\r\n                    <Form.Label>Account to revoke:</Form.Label>\r\n                    <Form.Control type=\"email\" placeholder=\"Enter email address\" name=\"email\"\r\n                        onChange={handleInputChange} values={emailText} required />\r\n                </Form.Group>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant=\"danger\" onClick={handleSubmit} disabled={disableButton}>\r\n                    <FontAwesomeIcon icon={faTimes} /> {disableButton ? 'Please wait...' : 'Revoke'}\r\n                </Button>\r\n            </Modal.Footer>\r\n            <div style={{ \"display\": showToast ? \"block\" : \"none\" }}>\r\n                <CustomToast success={success} message={toastMessage} />\r\n            </div>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nexport default RevokeAccessModal\r\n\r\n"]},"metadata":{},"sourceType":"module"}
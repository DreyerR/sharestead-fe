{"ast":null,"code":"import _defineProperty from\"C:/Users/rudid/OneDrive/Documents/React/sharestead-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/rudid/OneDrive/Documents/React/sharestead-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/rudid/OneDrive/Documents/React/sharestead-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Card,Col,Row,Form,Button,InputGroup}from'react-bootstrap';import{Navigate}from'react-router-dom';import{faSignInAlt,faRedo,faLock}from'@fortawesome/free-solid-svg-icons';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import CustomToast from'./CustomToast';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),loginDetails=_useState2[0],setLoginDetails=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),didLogin=_useState4[0],updateLogin=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),didSubmitForm=_useState6[0],updateSubmitForm=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showToast=_useState8[0],updateShowToast=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),isSuccessful=_useState10[0],setIsSuccessful=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),toastMessage=_useState12[0],setToastMessage=_useState12[1];var handleInputChange=function handleInputChange(e){setLoginDetails(_objectSpread(_objectSpread({},loginDetails),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();updateSubmitForm(true);handleLoginRequest();};var handleLoginRequest=function handleLoginRequest(){var headers={'Content-Type':'application/json'};axios.post(\"https://cors-everywhere.herokuapp.com/http://sharestead-env-2.eba-mbvpyjui.eu-west-3.elasticbeanstalk.com/member/login\",loginDetails,{headers:headers}).then(function(response){var isSuccessful=true;console.log(response.data);if(!response.status===200){isSuccessful=false;}handlePostRegister(isSuccessful,response);}).catch(function(error){console.log(error);handlePostRegister(false,\"Username or password is incorrect\");});};var handlePostRegister=function handlePostRegister(wasSuccessful,response){cancelForm();// Clears the form\nsetIsSuccessful(wasSuccessful);setToastMessage(wasSuccessful?response.data.message:response);updateShowToast(true);setTimeout(function(){if(wasSuccessful){localStorage.setItem(\"userId\",response.data.payload.id);localStorage.setItem(\"email\",response.data.payload.email);localStorage.setItem(\"token\",response.data.payload.token);updateLogin(!didLogin);}else{updateShowToast(false);updateSubmitForm(false);}},2000);};var cancelForm=function cancelForm(){document.getElementById(\"loginFormId\").reset();};if(didLogin){return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{\"display\":showToast?\"block\":\"none\"},children:/*#__PURE__*/_jsx(CustomToast,{success:isSuccessful,message:toastMessage})}),/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Card.Header,{style:{fontSize:'2rem',fontWeight:'bold'},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faSignInAlt,style:{color:'#e2821d'}}),\"  Login\"]})}),/*#__PURE__*/_jsx(Card.Title,{className:\"mb-1 p-3\",children:\"Login with your email and password:\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,id:\"loginFormId\",children:[/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{lg:12,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicEmail\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Email:\"}),/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(InputGroup.Text,{id:\"basic-addon1\",children:/*#__PURE__*/_jsx(\"strong\",{children:\"@\"})}),/*#__PURE__*/_jsx(Form.Control,{type:\"email\",placeholder:\"name@example.com\",name:\"email\",onChange:handleInputChange,required:true})]})]})})}),/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Col,{lg:12,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"formBasicPassword\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password:\"}),/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(InputGroup.Text,{children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faLock})}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Enter your password\",name:\"password\",onChange:handleInputChange,required:true})]})]})})})]}),/*#__PURE__*/_jsx(Card.Footer,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-end\",children:[/*#__PURE__*/_jsxs(Button,{variant:\"primary\",onClick:cancelForm,children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faRedo,style:{marginRight:'5px'}}),\" Clear\"]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",style:{cursor:'pointer'},className:\"ms-3\",variant:\"success\",disabled:didSubmitForm,children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faSignInAlt,style:{marginRight:'5px'}}),didSubmitForm?'Please wait...':'Login']})})]})})]})]})]});}","map":{"version":3,"sources":["C:/Users/rudid/OneDrive/Documents/React/sharestead-frontend/src/components/Login.js"],"names":["React","useState","Card","Col","Row","Form","Button","InputGroup","Navigate","faSignInAlt","faRedo","faLock","FontAwesomeIcon","CustomToast","axios","Login","email","password","loginDetails","setLoginDetails","didLogin","updateLogin","didSubmitForm","updateSubmitForm","showToast","updateShowToast","isSuccessful","setIsSuccessful","toastMessage","setToastMessage","handleInputChange","e","target","name","value","handleSubmit","preventDefault","handleLoginRequest","headers","post","then","response","console","log","data","status","handlePostRegister","catch","error","wasSuccessful","cancelForm","message","setTimeout","localStorage","setItem","payload","id","token","document","getElementById","reset","fontSize","fontWeight","color","marginRight","cursor"],"mappings":"2aAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,IAAT,CAAeC,GAAf,CAAoBC,GAApB,CAAyBC,IAAzB,CAA+BC,MAA/B,CAAuCC,UAAvC,KAAyD,iBAAzD,CACA,OAASC,QAAT,KAAyB,kBAAzB,CAEA,OAASC,WAAT,CAAsBC,MAAtB,CAA8BC,MAA9B,KAA4C,mCAA5C,CACA,OAASC,eAAT,KAAgC,gCAAhC,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,wFAEA,cAAe,SAASC,CAAAA,KAAT,EAAiB,CAE5B,cAAwCd,QAAQ,CAAC,CAAEe,KAAK,CAAE,EAAT,CAAaC,QAAQ,CAAE,EAAvB,CAAD,CAAhD,wCAAOC,YAAP,eAAqBC,eAArB,eACA,eAAgClB,QAAQ,CAAC,KAAD,CAAxC,yCAAOmB,QAAP,eAAiBC,WAAjB,eACA,eAA0CpB,QAAQ,CAAC,KAAD,CAAlD,yCAAOqB,aAAP,eAAsBC,gBAAtB,eACA,eAAqCtB,QAAQ,CAAC,KAAD,CAA7C,yCAAOuB,SAAP,eAAkBC,eAAlB,eACA,eAAwCxB,QAAQ,CAAC,IAAD,CAAhD,0CAAOyB,YAAP,gBAAqBC,eAArB,gBACA,gBAAwC1B,QAAQ,CAAC,EAAD,CAAhD,2CAAO2B,YAAP,gBAAqBC,eAArB,gBAEA,GAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAAAC,CAAC,CAAI,CAC3BZ,eAAe,gCAEJD,YAFI,wBAGNa,CAAC,CAACC,MAAF,CAASC,IAHH,CAGUF,CAAC,CAACC,MAAF,CAASE,KAHnB,GAAf,CAMH,CAPD,CASA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAJ,CAAC,CAAI,CACtBA,CAAC,CAACK,cAAF,GAEAb,gBAAgB,CAAC,IAAD,CAAhB,CACAc,kBAAkB,GACrB,CALD,CAOA,GAAMA,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,EAAM,CAE7B,GAAMC,CAAAA,OAAO,CAAG,CACZ,eAAgB,kBADJ,CAAhB,CAIAxB,KAAK,CAACyB,IAAN,CAAW,wHAAX,CAAqIrB,YAArI,CAAmJ,CAC/IoB,OAAO,CAAEA,OADsI,CAAnJ,EAEGE,IAFH,CAEQ,SAAAC,QAAQ,CAAI,CAChB,GAAIf,CAAAA,YAAY,CAAG,IAAnB,CAEAgB,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,IAArB,EACA,GAAI,CAACH,QAAQ,CAACI,MAAV,GAAqB,GAAzB,CAA8B,CAC1BnB,YAAY,CAAG,KAAf,CACH,CAEDoB,kBAAkB,CAACpB,YAAD,CAAee,QAAf,CAAlB,CACH,CAXD,EAWGM,KAXH,CAWS,SAAAC,KAAK,CAAI,CACdN,OAAO,CAACC,GAAR,CAAYK,KAAZ,EACAF,kBAAkB,CAAC,KAAD,CAAQ,mCAAR,CAAlB,CACH,CAdD,EAeH,CArBD,CAuBA,GAAMA,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACG,aAAD,CAAgBR,QAAhB,CAA6B,CACpDS,UAAU,GAAI;AAEdvB,eAAe,CAACsB,aAAD,CAAf,CACApB,eAAe,CAACoB,aAAa,CAAGR,QAAQ,CAACG,IAAT,CAAcO,OAAjB,CAA2BV,QAAzC,CAAf,CACAhB,eAAe,CAAC,IAAD,CAAf,CAEA2B,UAAU,CAAC,UAAM,CACb,GAAIH,aAAJ,CAAmB,CAEfI,YAAY,CAACC,OAAb,CAAqB,QAArB,CAA+Bb,QAAQ,CAACG,IAAT,CAAcW,OAAd,CAAsBC,EAArD,EACAH,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8Bb,QAAQ,CAACG,IAAT,CAAcW,OAAd,CAAsBvC,KAApD,EACAqC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8Bb,QAAQ,CAACG,IAAT,CAAcW,OAAd,CAAsBE,KAApD,EAEApC,WAAW,CAAC,CAACD,QAAF,CAAX,CACH,CAPD,IAQK,CACDK,eAAe,CAAC,KAAD,CAAf,CACAF,gBAAgB,CAAC,KAAD,CAAhB,CACH,CACJ,CAbS,CAaP,IAbO,CAAV,CAcH,CArBD,CAuBA,GAAM2B,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACrBQ,QAAQ,CAACC,cAAT,CAAwB,aAAxB,EAAuCC,KAAvC,GACH,CAFD,CAIA,GAAIxC,QAAJ,CAAc,CACV,mBAAO,KAAC,QAAD,EAAU,EAAE,CAAC,GAAb,EAAP,CACH,CAED,mBACI,oCACI,YAAK,KAAK,CAAE,CAAE,UAAWI,SAAS,CAAG,OAAH,CAAa,MAAnC,CAAZ,uBACI,KAAC,WAAD,EAAa,OAAO,CAAEE,YAAtB,CAAoC,OAAO,CAAEE,YAA7C,EADJ,EADJ,cAII,MAAC,IAAD,yBACI,KAAC,IAAD,CAAM,MAAN,EAAa,KAAK,CAAE,CAAEiC,QAAQ,CAAE,MAAZ,CAAoBC,UAAU,CAAE,MAAhC,CAApB,uBACI,oCACI,KAAC,eAAD,EAAiB,IAAI,CAAErD,WAAvB,CAAoC,KAAK,CAAE,CAAEsD,KAAK,CAAE,SAAT,CAA3C,EADJ,aADJ,EADJ,cAOI,KAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,UAAtB,iDAPJ,cAQI,MAAC,IAAD,EAAM,QAAQ,CAAE5B,YAAhB,CAA8B,EAAE,CAAC,aAAjC,wBACI,MAAC,IAAD,CAAM,IAAN,yBACI,KAAC,GAAD,wBACI,KAAC,GAAD,EAAK,EAAE,CAAE,EAAT,uBACI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,MAAtB,CAA6B,SAAS,CAAC,gBAAvC,wBACI,KAAC,IAAD,CAAM,KAAN,qBADJ,cAEI,MAAC,UAAD,yBACI,KAAC,UAAD,CAAY,IAAZ,EAAiB,EAAE,CAAC,cAApB,uBAAmC,6BAAnC,EADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,OAAnB,CAA2B,WAAW,CAAC,kBAAvC,CAA0D,IAAI,CAAC,OAA/D,CACI,QAAQ,CAAEL,iBADd,CACiC,QAAQ,KADzC,EAFJ,GAFJ,GADJ,EADJ,EADJ,cAaI,KAAC,GAAD,wBACI,KAAC,GAAD,EAAK,EAAE,CAAE,EAAT,uBACI,MAAC,IAAD,CAAM,KAAN,EAAY,SAAS,CAAC,MAAtB,CAA6B,SAAS,CAAC,mBAAvC,wBACI,KAAC,IAAD,CAAM,KAAN,wBADJ,cAEI,MAAC,UAAD,yBACI,KAAC,UAAD,CAAY,IAAZ,wBAAiB,KAAC,eAAD,EAAiB,IAAI,CAAEnB,MAAvB,EAAjB,EADJ,cAEI,KAAC,IAAD,CAAM,OAAN,EAAc,IAAI,CAAC,UAAnB,CAA8B,WAAW,CAAC,qBAA1C,CAAgE,IAAI,CAAC,UAArE,CACI,QAAQ,CAAEmB,iBADd,CACiC,QAAQ,KADzC,EAFJ,GAFJ,GADJ,EADJ,EAbJ,GADJ,cA2BI,KAAC,IAAD,CAAM,MAAN,wBACI,aAAK,SAAS,CAAC,4BAAf,wBACI,MAAC,MAAD,EAAQ,OAAO,CAAC,SAAhB,CAA0B,OAAO,CAAEoB,UAAnC,wBACI,KAAC,eAAD,EAAiB,IAAI,CAAExC,MAAvB,CAA+B,KAAK,CAAE,CAAEsD,WAAW,CAAE,KAAf,CAAtC,EADJ,YADJ,cAKI,KAAC,MAAD,EAAQ,IAAI,CAAC,QAAb,CAAsB,KAAK,CAAE,CAAEC,MAAM,CAAE,SAAV,CAA7B,CAAoD,SAAS,CAAC,MAA9D,CAAqE,OAAO,CAAC,SAA7E,CAAuF,QAAQ,CAAE3C,aAAjG,uBACI,oCAAK,KAAC,eAAD,EAAiB,IAAI,CAAEb,WAAvB,CAAoC,KAAK,CAAE,CAAEuD,WAAW,CAAE,KAAf,CAA3C,EAAL,CACK1C,aAAa,CAAG,gBAAH,CAAsB,OADxC,GADJ,EALJ,GADJ,EA3BJ,GARJ,GAJJ,GADJ,CAyDH","sourcesContent":["import React, { useState } from 'react';\r\nimport { Card, Col, Row, Form, Button, InputGroup } from 'react-bootstrap';\r\nimport { Navigate } from 'react-router-dom';\r\n\r\nimport { faSignInAlt, faRedo, faLock } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport CustomToast from './CustomToast';\r\nimport axios from 'axios';\r\n\r\nexport default function Login() {\r\n\r\n    const [loginDetails, setLoginDetails] = useState({ email: \"\", password: \"\" });\r\n    const [didLogin, updateLogin] = useState(false);\r\n    const [didSubmitForm, updateSubmitForm] = useState(false);\r\n    const [showToast, updateShowToast] = useState(false);\r\n    const [isSuccessful, setIsSuccessful] = useState(true);\r\n    const [toastMessage, setToastMessage] = useState(\"\");\r\n\r\n    const handleInputChange = e => {\r\n        setLoginDetails(\r\n            {\r\n                ...loginDetails,\r\n                [e.target.name]: e.target.value\r\n            }\r\n        );\r\n    }\r\n\r\n    const handleSubmit = e => {\r\n        e.preventDefault();\r\n\r\n        updateSubmitForm(true);\r\n        handleLoginRequest();\r\n    }\r\n\r\n    const handleLoginRequest = () => {\r\n\r\n        const headers = {\r\n            'Content-Type': 'application/json',\r\n        }\r\n\r\n        axios.post(\"https://cors-everywhere.herokuapp.com/http://sharestead-env-2.eba-mbvpyjui.eu-west-3.elasticbeanstalk.com/member/login\", loginDetails, {\r\n            headers: headers\r\n        }).then(response => {\r\n            let isSuccessful = true;\r\n\r\n            console.log(response.data);\r\n            if (!response.status === 200) {\r\n                isSuccessful = false;\r\n            }\r\n\r\n            handlePostRegister(isSuccessful, response);\r\n        }).catch(error => {\r\n            console.log(error);\r\n            handlePostRegister(false, \"Username or password is incorrect\");\r\n        });\r\n    }\r\n\r\n    const handlePostRegister = (wasSuccessful, response) => {\r\n        cancelForm(); // Clears the form\r\n\r\n        setIsSuccessful(wasSuccessful);\r\n        setToastMessage(wasSuccessful ? response.data.message : response);\r\n        updateShowToast(true);\r\n\r\n        setTimeout(() => {\r\n            if (wasSuccessful) {\r\n\r\n                localStorage.setItem(\"userId\", response.data.payload.id);\r\n                localStorage.setItem(\"email\", response.data.payload.email);\r\n                localStorage.setItem(\"token\", response.data.payload.token);\r\n\r\n                updateLogin(!didLogin);\r\n            }\r\n            else {\r\n                updateShowToast(false);\r\n                updateSubmitForm(false);\r\n            }\r\n        }, 2000);\r\n    }\r\n\r\n    const cancelForm = () => {\r\n        document.getElementById(\"loginFormId\").reset();\r\n    }\r\n\r\n    if (didLogin) {\r\n        return <Navigate to=\"/\" />\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div style={{ \"display\": showToast ? \"block\" : \"none\" }}>\r\n                <CustomToast success={isSuccessful} message={toastMessage} />\r\n            </div>\r\n            <Card>\r\n                <Card.Header style={{ fontSize: '2rem', fontWeight: 'bold' }}>\r\n                    <div>\r\n                        <FontAwesomeIcon icon={faSignInAlt} style={{ color: '#e2821d' }} />  Login\r\n                    </div>\r\n                </Card.Header>\r\n\r\n                <Card.Title className=\"mb-1 p-3\">Login with your email and password:</Card.Title>\r\n                <Form onSubmit={handleSubmit} id=\"loginFormId\">\r\n                    <Card.Body>\r\n                        <Row>\r\n                            <Col lg={12}>\r\n                                <Form.Group className=\"mb-3\" controlId=\"formBasicEmail\">\r\n                                    <Form.Label>Email:</Form.Label>\r\n                                    <InputGroup>\r\n                                        <InputGroup.Text id=\"basic-addon1\"><strong>@</strong></InputGroup.Text>\r\n                                        <Form.Control type=\"email\" placeholder=\"name@example.com\" name=\"email\"\r\n                                            onChange={handleInputChange} required />\r\n                                    </InputGroup>\r\n                                </Form.Group>\r\n                            </Col>\r\n                        </Row>\r\n                        <Row>\r\n                            <Col lg={12}>\r\n                                <Form.Group className=\"mb-3\" controlId=\"formBasicPassword\">\r\n                                    <Form.Label>Password:</Form.Label>\r\n                                    <InputGroup>\r\n                                        <InputGroup.Text><FontAwesomeIcon icon={faLock} /></InputGroup.Text>\r\n                                        <Form.Control type=\"password\" placeholder=\"Enter your password\" name=\"password\"\r\n                                            onChange={handleInputChange} required />\r\n                                    </InputGroup>\r\n                                </Form.Group>\r\n                            </Col>\r\n                        </Row>\r\n                    </Card.Body>\r\n                    <Card.Footer>\r\n                        <div className=\"d-flex justify-content-end\">\r\n                            <Button variant=\"primary\" onClick={cancelForm}>\r\n                                <FontAwesomeIcon icon={faRedo} style={{ marginRight: '5px' }} /> Clear\r\n                            </Button>\r\n\r\n                            <Button type=\"submit\" style={{ cursor: 'pointer' }} className=\"ms-3\" variant=\"success\" disabled={didSubmitForm}>\r\n                                <div><FontAwesomeIcon icon={faSignInAlt} style={{ marginRight: '5px' }} />\r\n                                    {didSubmitForm ? 'Please wait...' : 'Login'}\r\n                                </div>\r\n                            </Button>\r\n                        </div>\r\n                    </Card.Footer>\r\n                </Form>\r\n            </Card>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}
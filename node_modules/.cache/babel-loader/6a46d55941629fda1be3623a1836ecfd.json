{"ast":null,"code":"import _objectSpread from\"C:/Users/rudid/OneDrive/Documents/React/sharestead-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/rudid/OneDrive/Documents/React/sharestead-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Modal,Button}from'react-bootstrap';import{faTrash}from'@fortawesome/free-solid-svg-icons';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import CustomToast from'./CustomToast';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function DeleteModal(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),disableButton=_useState2[0],setDisableButton=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showToast=_useState4[0],setShowToast=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),success=_useState6[0],setSuccess=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),toastMessage=_useState8[0],setToastMessage=_useState8[1];var handleSubmit=function handleSubmit(e){e.preventDefault();setDisableButton(true);if(props.deleteforall){deleteForAllPost();}else{deletePost();}};var deleteForAllPost=function deleteForAllPost(){var email=localStorage.getItem('email');var token=localStorage.getItem('token');var headers={'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)};axios.delete(\"https://cors-everywhere.herokuapp.com/http://sharestead-env-2.eba-mbvpyjui.eu-west-3.elasticbeanstalk.com/image/delete/all/\".concat(email,\"/\").concat(props.filename),{headers:headers}).then(function(response){if(response.status===200){setToastMessage(\"Successfully deleted photo for all\");}}).catch(function(error){if(error.response.status===405)setToastMessage(\"You don't have sufficient access to delete\");else if(error.response.status===404)setToastMessage(\"Image/member could not be found\");else if(error.response.status===500)setToastMessage(error.response.data.message);setSuccess(false);});setShowToast(true);setTimeout(function(){setShowToast(false);setDisableButton(false);window.location.reload();props.onHide();},2000);};var deletePost=function deletePost(){var email=localStorage.getItem('email');var token=localStorage.getItem('token');var headers={'Content-Type':'application/json','Authorization':\"Bearer \".concat(token)};axios.delete(\"https://cors-everywhere.herokuapp.com/http://sharestead-env-2.eba-mbvpyjui.eu-west-3.elasticbeanstalk.com/image/delete/\".concat(email,\"/\").concat(props.filename),{headers:headers}).then(function(response){if(response.status===200){setToastMessage(\"Successfully deleted photo\");}}).catch(function(error){if(error.response.status===404)setToastMessage(\"Image could not be found\");else setToastMessage(error.response.data.message);setSuccess(false);});setShowToast(true);setTimeout(function(){setShowToast(false);setDisableButton(false);window.location.reload();props.onHide();},2000);};return/*#__PURE__*/_jsxs(Modal,_objectSpread(_objectSpread({},props),{},{size:\"lg\",\"aria-labelledby\":\"contained-modal-title-vcenter\",centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{id:\"contained-modal-title-vcenter\",children:\"Confirmation\"})}),/*#__PURE__*/_jsx(Modal.Body,{children:!props.deleteforall?/*#__PURE__*/_jsx(\"p\",{children:\"Are you sure you want to delete the photo?\"}):/*#__PURE__*/_jsx(\"p\",{children:\"Are you sure you want to delete the photo for all members?\"})}),/*#__PURE__*/_jsx(Modal.Footer,{children:/*#__PURE__*/_jsxs(Button,{variant:\"danger\",onClick:handleSubmit,disabled:disableButton,children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTrash}),\" \",disableButton?'Please wait...':'Delete']})}),/*#__PURE__*/_jsx(\"div\",{style:{\"display\":showToast?\"block\":\"none\"},children:/*#__PURE__*/_jsx(CustomToast,{success:success,message:toastMessage})})]}));}export default DeleteModal;","map":{"version":3,"sources":["C:/Users/rudid/OneDrive/Documents/React/sharestead-frontend/src/components/DeleteModal.js"],"names":["React","useState","Modal","Button","faTrash","FontAwesomeIcon","CustomToast","axios","DeleteModal","props","disableButton","setDisableButton","showToast","setShowToast","success","setSuccess","toastMessage","setToastMessage","handleSubmit","e","preventDefault","deleteforall","deleteForAllPost","deletePost","email","localStorage","getItem","token","headers","delete","filename","then","response","status","catch","error","data","message","setTimeout","window","location","reload","onHide"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\r\nimport { Modal, Button } from 'react-bootstrap'\r\nimport { faTrash } from '@fortawesome/free-solid-svg-icons'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport CustomToast from './CustomToast'\r\nimport axios from 'axios'\r\n\r\nfunction DeleteModal(props) {\r\n\r\n    const [disableButton, setDisableButton] = useState(false);\r\n    const [showToast, setShowToast] = useState(false);\r\n    const [success, setSuccess] = useState(true);\r\n    const [toastMessage, setToastMessage] = useState(\"\");\r\n\r\n    const handleSubmit = e => {\r\n        e.preventDefault();\r\n\r\n        setDisableButton(true);\r\n\r\n        if (props.deleteforall) {\r\n            deleteForAllPost();\r\n        }\r\n        else {\r\n            deletePost();\r\n        }\r\n    }\r\n\r\n    const deleteForAllPost = () => {\r\n        let email = localStorage.getItem('email');\r\n        let token = localStorage.getItem('token');\r\n\r\n        const headers = {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`\r\n        }\r\n\r\n        axios.delete(`https://cors-everywhere.herokuapp.com/http://sharestead-env-2.eba-mbvpyjui.eu-west-3.elasticbeanstalk.com/image/delete/all/${email}/${props.filename}`, {\r\n            headers: headers\r\n        }).then(response => {\r\n            if (response.status === 200) {\r\n                setToastMessage(\"Successfully deleted photo for all\");\r\n            }\r\n        }).catch(error => {\r\n\r\n            if (error.response.status === 405)\r\n                setToastMessage(\"You don't have sufficient access to delete\");\r\n            else if (error.response.status === 404)\r\n                setToastMessage(\"Image/member could not be found\");\r\n            else if (error.response.status === 500)\r\n                setToastMessage(error.response.data.message);\r\n\r\n            setSuccess(false);\r\n        });\r\n\r\n        setShowToast(true);\r\n        setTimeout(() => {\r\n            setShowToast(false);\r\n            setDisableButton(false);\r\n            window.location.reload();\r\n            props.onHide();\r\n        }, 2000);\r\n    }\r\n\r\n    const deletePost = () => {\r\n        let email = localStorage.getItem('email');\r\n        let token = localStorage.getItem('token');\r\n\r\n        const headers = {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`\r\n        }\r\n\r\n        axios.delete(`https://cors-everywhere.herokuapp.com/http://sharestead-env-2.eba-mbvpyjui.eu-west-3.elasticbeanstalk.com/image/delete/${email}/${props.filename}`, {\r\n            headers: headers\r\n        }).then(response => {\r\n            if (response.status === 200) {\r\n                setToastMessage(\"Successfully deleted photo\");\r\n            }\r\n        }).catch(error => {\r\n\r\n            if (error.response.status === 404)\r\n                setToastMessage(\"Image could not be found\");\r\n            else\r\n                setToastMessage(error.response.data.message);\r\n\r\n            setSuccess(false);\r\n        });\r\n\r\n        setShowToast(true);\r\n        setTimeout(() => {\r\n            setShowToast(false);\r\n            setDisableButton(false);\r\n            window.location.reload();\r\n            props.onHide();\r\n        }, 2000);\r\n    }\r\n\r\n    return (\r\n        <Modal\r\n            {...props}\r\n            size=\"lg\"\r\n            aria-labelledby=\"contained-modal-title-vcenter\"\r\n            centered\r\n        >\r\n            <Modal.Header closeButton>\r\n                <Modal.Title id=\"contained-modal-title-vcenter\">\r\n                    Confirmation\r\n                </Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                {!props.deleteforall ? <p>Are you sure you want to delete the photo?</p> :\r\n                    <p>Are you sure you want to delete the photo for all members?</p>}\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant=\"danger\" onClick={handleSubmit} disabled={disableButton}>\r\n                    <FontAwesomeIcon icon={faTrash} /> {disableButton ? 'Please wait...' : 'Delete'}\r\n                </Button>\r\n            </Modal.Footer>\r\n            <div style={{ \"display\": showToast ? \"block\" : \"none\" }}>\r\n                <CustomToast success={success} message={toastMessage} />\r\n            </div>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nexport default DeleteModal\r\n"]},"metadata":{},"sourceType":"module"}